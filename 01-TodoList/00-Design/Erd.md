# ERD (Entity Relationship Diagram)

## ğŸ“Š ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„

TodoList APIì˜ ë°ì´í„° ëª¨ë¸ê³¼ ê´€ê³„ë¥¼ ì •ì˜í•©ë‹ˆë‹¤.

---

## ğŸ—‚ï¸ ì—”í‹°í‹° (Entities)

### Todo ì—”í‹°í‹°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              TODO                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK  id           : STRING (UUID)        â”‚
â”‚     title        : STRING (1-100)       â”‚
â”‚     description  : STRING (0-500)       â”‚
â”‚     completed    : BOOLEAN              â”‚
â”‚     createdAt    : DATETIME             â”‚
â”‚     updatedAt    : DATETIME             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“‹ í•„ë“œ ìƒì„¸ ì„¤ëª…

### id (Primary Key)
- **íƒ€ì…**: String (UUID v4)
- **ì œì•½ì¡°ê±´**: 
  - NOT NULL
  - UNIQUE
  - Primary Key
- **ì˜ˆì‹œ**: `"550e8400-e29b-41d4-a716-446655440000"`
- **ìƒì„± ë°©ë²•**: `crypto.randomUUID()` ì‚¬ìš©
- **ìš©ë„**: Todoë¥¼ ê³ ìœ í•˜ê²Œ ì‹ë³„

### title
- **íƒ€ì…**: String
- **ì œì•½ì¡°ê±´**:
  - NOT NULL
  - ê¸¸ì´: 1-100ì
  - ê³µë°±ë§Œ ìˆëŠ” ë¬¸ìì—´ ë¶ˆê°€
- **ì˜ˆì‹œ**: `"Node.js ê³µë¶€í•˜ê¸°"`
- **ê²€ì¦**: 
  ```javascript
  title.trim().length >= 1 && title.length <= 100
  ```

### description
- **íƒ€ì…**: String
- **ì œì•½ì¡°ê±´**:
  - NULLABLE (ì„ íƒ ì‚¬í•­)
  - ìµœëŒ€ ê¸¸ì´: 500ì
- **ì˜ˆì‹œ**: `"Expressì™€ NestJS ë¹„êµí•˜ë©° í•™ìŠµ"`
- **ê¸°ë³¸ê°’**: `""` (ë¹ˆ ë¬¸ìì—´)

### completed
- **íƒ€ì…**: Boolean
- **ì œì•½ì¡°ê±´**:
  - NOT NULL
  - true ë˜ëŠ” falseë§Œ í—ˆìš©
- **ê¸°ë³¸ê°’**: `false`
- **ì˜ë¯¸**: 
  - `true`: ì™„ë£Œëœ Todo
  - `false`: ë¯¸ì™„ë£Œëœ Todo

### createdAt
- **íƒ€ì…**: String (ISO 8601)
- **ì œì•½ì¡°ê±´**:
  - NOT NULL
  - ISO 8601 í˜•ì‹
- **ì˜ˆì‹œ**: `"2024-01-29T12:34:56.789Z"`
- **ìƒì„± ë°©ë²•**: `new Date().toISOString()`
- **ìš©ë„**: Todo ìƒì„± ì‹œê° ê¸°ë¡

### updatedAt
- **íƒ€ì…**: String (ISO 8601)
- **ì œì•½ì¡°ê±´**:
  - NOT NULL
  - ISO 8601 í˜•ì‹
- **ì˜ˆì‹œ**: `"2024-01-29T15:20:30.123Z"`
- **ê°±ì‹ **: Todo ìˆ˜ì • ì‹œ ìë™ ì—…ë°ì´íŠ¸
- **ìš©ë„**: ë§ˆì§€ë§‰ ìˆ˜ì • ì‹œê° ì¶”ì 

---

## ğŸ”— ê´€ê³„ (Relationships)

í˜„ì¬ ë²„ì „(Phase 1)ì—ì„œëŠ” ë‹¨ì¼ ì—”í‹°í‹°ë§Œ ì¡´ì¬í•©ë‹ˆë‹¤.

```
í–¥í›„ í™•ì¥ ì‹œ ì˜ˆìƒ ê´€ê³„:

User (1) â”€â”€â”€â”€â”€< (N) Todo
  â”‚
  â””â”€ í•œ ì‚¬ìš©ìëŠ” ì—¬ëŸ¬ ê°œì˜ Todoë¥¼ ê°€ì§ˆ ìˆ˜ ìˆë‹¤
  
Todo (N) â”€â”€â”€â”€â”€< (N) Tag
  â”‚
  â””â”€ í•˜ë‚˜ì˜ TodoëŠ” ì—¬ëŸ¬ íƒœê·¸ë¥¼ ê°€ì§ˆ ìˆ˜ ìˆë‹¤
  â””â”€ í•˜ë‚˜ì˜ íƒœê·¸ëŠ” ì—¬ëŸ¬ Todoì— ì†í•  ìˆ˜ ìˆë‹¤ (ë‹¤ëŒ€ë‹¤)
```

---

## ğŸ’¾ ë°ì´í„° ì €ì¥ ë°©ì‹

### Phase 1: ë©”ëª¨ë¦¬ ì €ì¥ (Vanilla-Right ì´ˆê¸°)
```javascript
// ë©”ëª¨ë¦¬ ê¸°ë°˜ ì €ì¥ì†Œ
const todos = [
  {
    id: "uuid-1",
    title: "ì²« ë²ˆì§¸ í•  ì¼",
    description: "ì„¤ëª…",
    completed: false,
    createdAt: "2024-01-29T10:00:00.000Z",
    updatedAt: "2024-01-29T10:00:00.000Z"
  }
];
```

**ì¥ì **:
- âœ… ë¹ ë¥¸ ì†ë„
- âœ… ê°„ë‹¨í•œ êµ¬í˜„
- âœ… ì™¸ë¶€ ì˜ì¡´ì„± ì—†ìŒ

**ë‹¨ì **:
- âŒ ì„œë²„ ì¬ì‹œì‘ ì‹œ ë°ì´í„° ì†ì‹¤
- âŒ í™•ì¥ì„± ì œí•œ

### Phase 1.5: íŒŒì¼ ì €ì¥
```javascript
// JSON íŒŒì¼ë¡œ ì €ì¥
// data/todos.json
```

**ì¥ì **:
- âœ… ë°ì´í„° ì˜ì†ì„±
- âœ… ê°„ë‹¨í•œ ë°±ì—…

**ë‹¨ì **:
- âŒ ë™ì‹œì„± ë¬¸ì œ ê°€ëŠ¥
- âŒ ëŒ€ìš©ëŸ‰ ë°ì´í„° ì²˜ë¦¬ ì–´ë ¤ì›€

### Phase 2: ë°ì´í„°ë² ì´ìŠ¤ ì €ì¥

#### PostgreSQL (ê´€ê³„í˜• DB)
```sql
CREATE TABLE todos (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  title VARCHAR(100) NOT NULL,
  description VARCHAR(500),
  completed BOOLEAN NOT NULL DEFAULT false,
  created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP
);

-- ì¸ë±ìŠ¤
CREATE INDEX idx_created_at ON todos(created_at DESC);
CREATE INDEX idx_completed ON todos(completed);
```

#### MongoDB (NoSQL)
```javascript
{
  _id: ObjectId("..."),
  id: "uuid-...",
  title: "í•  ì¼",
  description: "ì„¤ëª…",
  completed: false,
  createdAt: ISODate("2024-01-29T10:00:00.000Z"),
  updatedAt: ISODate("2024-01-29T10:00:00.000Z")
}

// ì¸ë±ìŠ¤
db.todos.createIndex({ createdAt: -1 })
db.todos.createIndex({ completed: 1 })
```

---

## ğŸ¯ ì¸ë±ìŠ¤ ì „ëµ

### ì¡°íšŒ ì„±ëŠ¥ ìµœì í™”ë¥¼ ìœ„í•œ ì¸ë±ìŠ¤

1. **created_at (DESC)**
   - ìµœì‹  Todo ë¨¼ì € ì¡°íšŒí•˜ëŠ” ê²½ìš°ê°€ ë§ìŒ
   - ì •ë ¬ ì„±ëŠ¥ í–¥ìƒ

2. **completed**
   - ì™„ë£Œ/ë¯¸ì™„ë£Œ í•„í„°ë§ ì‹œ ì‚¬ìš©
   - Cardinalityê°€ ë‚®ì§€ë§Œ ìì£¼ ì‚¬ìš©

3. **id (Primary Key)**
   - ìë™ìœ¼ë¡œ ì¸ë±ì‹±
   - íŠ¹ì • Todo ì¡°íšŒ ì‹œ ì‚¬ìš©

---

## ğŸ“ˆ ë°ì´í„° í¬ê¸° ì˜ˆì¸¡

### ë‹¨ì¼ Todo í¬ê¸°
```javascript
{
  id: "550e8400-e29b-41d4-a716-446655440000",     // ~36 bytes
  title: "í•  ì¼ ì œëª©",                              // ~40 bytes (í‰ê· )
  description: "ìƒì„¸ ì„¤ëª…...",                      // ~200 bytes (í‰ê· )
  completed: false,                                // ~5 bytes
  createdAt: "2024-01-29T10:00:00.000Z",          // ~24 bytes
  updatedAt: "2024-01-29T10:00:00.000Z"           // ~24 bytes
}
// ì´ ì•½ 330 bytes
```

### ìš©ëŸ‰ ê³„ì‚°
- 1,000ê°œ Todo = ~330 KB
- 10,000ê°œ Todo = ~3.3 MB
- 100,000ê°œ Todo = ~33 MB
- 1,000,000ê°œ Todo = ~330 MB

**ê²°ë¡ **: ì´ˆê¸°ì—ëŠ” íŒŒì¼ ì €ì¥ìœ¼ë¡œë„ ì¶©ë¶„í•˜ë©°, 10ë§Œ ê°œ ì´ìƒë¶€í„° DB ê³ ë ¤

---

## âœ… ë°ì´í„° ë¬´ê²°ì„± ê·œì¹™

### 1. ì—”í‹°í‹° ë¬´ê²°ì„± (Entity Integrity)
- Primary Key(id)ëŠ” NULL ë¶ˆê°€
- Primary KeyëŠ” ê³ ìœ í•´ì•¼ í•¨

### 2. ë„ë©”ì¸ ë¬´ê²°ì„± (Domain Integrity)
- title: 1-100ì
- description: 0-500ì
- completed: booleanë§Œ í—ˆìš©
- ë‚ ì§œ: ISO 8601 í˜•ì‹ë§Œ í—ˆìš©

### 3. ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™
- titleì€ ê³µë°±ë§Œìœ¼ë¡œ êµ¬ì„± ë¶ˆê°€
- createdAt <= updatedAt (ìƒì„± ì‹œê°„ì€ ìˆ˜ì • ì‹œê°„ë³´ë‹¤ ì´ì „ì´ê±°ë‚˜ ê°™ìŒ)
- ì‚­ì œëœ TodoëŠ” ë³µêµ¬ ë¶ˆê°€

---

## ğŸ”„ ë°ì´í„° ìƒëª…ì£¼ê¸°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    CREATE    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ì—†ìŒ   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> â”‚  ìƒì„±   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â”‚ READ
                             â†“
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚  ì¡°íšŒ   â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â”‚ UPDATE
                             â†“
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚  ìˆ˜ì •   â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â”‚ DELETE
                             â†“
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚  ì‚­ì œ   â”‚ (ì˜êµ¬ ì‚­ì œ)
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š ìƒ˜í”Œ ë°ì´í„°

```javascript
// ë‹¤ì–‘í•œ ìƒíƒœì˜ Todo ìƒ˜í”Œ
const sampleTodos = [
  {
    id: "550e8400-e29b-41d4-a716-446655440001",
    title: "JavaScript ë°”ì´ë¸” í”„ë¡œì íŠ¸ ì‹œì‘",
    description: "TodoList APIë¥¼ ëª¨ë“  í”„ë ˆì„ì›Œí¬ë¡œ êµ¬í˜„í•˜ê¸°",
    completed: true,
    createdAt: "2024-01-28T09:00:00.000Z",
    updatedAt: "2024-01-28T18:30:00.000Z"
  },
  {
    id: "550e8400-e29b-41d4-a716-446655440002",
    title: "Express ë²„ì „ êµ¬í˜„",
    description: "",
    completed: false,
    createdAt: "2024-01-29T10:00:00.000Z",
    updatedAt: "2024-01-29T10:00:00.000Z"
  },
  {
    id: "550e8400-e29b-41d4-a716-446655440003",
    title: "NestJS í•™ìŠµ",
    description: "ë°ì½”ë ˆì´í„° íŒ¨í„´ê³¼ ì˜ì¡´ì„± ì£¼ì… ì´í•´í•˜ê¸°",
    completed: false,
    createdAt: "2024-01-29T11:30:00.000Z",
    updatedAt: "2024-01-29T14:20:00.000Z"
  }
];
```

---

**"ì¢‹ì€ ë°ì´í„° ì„¤ê³„ëŠ” ì¢‹ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ê¸°ì´ˆì´ë‹¤"**